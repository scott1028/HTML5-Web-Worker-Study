<!DOCTYPE html>
<html>
<head>
    <title>Web Worker Demo</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.js"></script>
</head>
<body>
<p>JavaScript Multi-Thread 替代方案</p>
<script id="worker01" type="worker/javascript">
    self.onmessage = function(e){
        importScripts(location.origin + '/lib.js');  // full URL Here
        importScripts(['https://scott1028.github.io/HTML5-Web-Worker-Study/lib2.js']);  // Using Lib From (cross domain)
        //
        // importScripts('http://192.168.1.170:8081/lib.js');  // for IE, due to no location.origin in web worker
        // importScripts('https://scott1028.github.io/HTML5-Web-Worker-Study/lib2.js');  // for IE, due to no location.origin in web worker
        //
        console.log(e, importScripts);
        self.postMessage('sent from worker: ' + echo(100));
        self.postMessage('sent from worker: ' + echo2(200));
    };
</script>
<script>
    'use strict';
    var worker = new Worker(window.URL.createObjectURL(new Blob([document.querySelector('#worker01').textContent], {type: 'text/javascript'})))

    worker.onmessage = function(e){
        console.log('received from worker', e, e.data);
    };

    worker.postMessage('Hello World!');
</script>
</body>
</html>
